# Tu Cosplay 平台数据库种子文件说明

## 📋 概述

本项目包含两套种子文件：开发环境种子和生产环境种子，用于初始化不同环境下的数据库数据。

## 🗂️ 种子文件结构

### 主种子文件

#### 1. `prisma/seed.ts` (开发环境)
- **用途**: 开发和测试环境
- **内容**: 完整的测试数据，包含用户、内容、配置等
- **管理员**: douyu (douyu112211)
- **测试用户**: 8个不同等级的测试用户
- **测试内容**: 15+个帖子和动态，包含丰富媒体
- **运行**: `npm run db:seed`

#### 2. `prisma/seed-production.ts` (生产环境)
- **用途**: 生产环境部署
- **内容**: 仅包含必要的管理员账户和系统配置
- **管理员**: douyu (douyu112211)
- **测试数据**: 无，仅包含欢迎帖子
- **运行**: `npm run db:seed-production`

### 子种子模块

#### 3. `prisma/seeds/cans-system-config.ts`
- **功能**: 罐头系统配置
- **内容**: 5个用户等级的差异化配置
- **包含**: 签到奖励、任务奖励、互动限制、社交权限
- **运行**: `npm run db:seed-cans`

#### 4. `prisma/seeds/user-group-configs.ts`
- **功能**: 用户组权限配置
- **内容**: 5个用户等级的权限设置
- **包含**: 发布权限、上传限制、互动权限、内容访问

#### 5. `prisma/seeds/featured-content-with-covers.ts`
- **功能**: 精选内容数据
- **内容**: 15个精选推荐内容
- **包含**: 作品集、教程、公告等多种类型

## 👤 管理员账户信息

### 统一管理员配置
- **用户名**: `douyu`
- **邮箱**: `kellisonyd@gmail.com`
- **密码**: `douyu112211`
- **显示名**: `斗鱼`
- **等级**: `ADMIN` (守馆)

### 安全提醒
⚠️ **生产环境部署后请立即修改管理员密码！**

## 🏗️ 用户等级系统

### 5个用户等级
1. **GUEST** (访客) - 未注册用户，仅可浏览
2. **USER** (入馆) - 注册用户，可发动态、评论
3. **MEMBER** (赞助) - 付费用户，可发作品、上传视频
4. **CREATOR** (荣誉) - 创作者，更高权限和奖励
5. **ADMIN** (守馆) - 管理员，所有权限

### 权限差异
- **发布权限**: 动态/作品发布数量限制
- **上传权限**: 图片/视频上传数量限制
- **罐头奖励**: 不同等级享受不同奖励
- **社交功能**: 社交账号链接数量限制

## 🚀 使用指南

### 开发环境初始化
```bash
# 重置数据库并运行完整种子
npm run db:reset

# 或单独运行开发种子
npm run db:seed
```

### 生产环境初始化
```bash
# 生产环境种子 (仅管理员和配置)
npm run db:seed-production
```

### 单独运行子模块
```bash
# 罐头系统配置
npm run db:seed-cans

# 其他子模块会被主种子自动调用
```

## 📊 开发环境测试数据

### 测试用户列表
1. **sakura_cos** (CREATOR) - 樱花小姐，专业cosplayer
2. **knight_cosplay** (MEMBER) - 骑士君，游戏角色爱好者
3. **anime_lover** (USER) - 动漫之心，cosplay新手
4. **photo_master** (CREATOR) - 摄影大师，专业摄影师
5. **newbie_cos** (USER) - 萌新小白，新人coser
6. **miku_fan** (MEMBER) - 初音未来粉，虚拟歌姬专家
7. **gothic_lolita** (CREATOR) - 哥特萝莉塔，服装制作达人
8. **game_hero** (MEMBER) - 游戏英雄，MOBA游戏角色专家

### 测试内容
- **作品类型**: 原神、王者荣耀、初音未来等热门角色
- **动态类型**: 制作过程、日常分享、活动预告
- **教程类型**: 摄影技巧、化妆教程、道具制作
- **媒体内容**: 高质量图片，支持多种尺寸

## 🔧 维护说明

### 添加新的种子数据
1. 在对应的种子文件中添加数据
2. 确保使用统一的管理员账户配置
3. 测试种子文件的运行

### 修改用户等级
1. 更新 `cans-system-config.ts`
2. 更新 `user-group-configs.ts`
3. 确保数据库模式同步

### 生产环境注意事项
1. 使用 `seed-production.ts` 而非 `seed.ts`
2. 部署后立即修改管理员密码
3. 定期备份生产数据库

## 📝 更新日志

- **v2.0.0** (2025-01-XX): 优化种子结构，统一管理员账户，创建生产环境种子
- **v1.0.0** (2024-01-XX): 初始版本，包含基础测试数据

---

**Tu Cosplay 平台开发团队**
