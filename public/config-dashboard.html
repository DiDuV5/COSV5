<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoserEden é…ç½®ç›‘æ§ä»ªè¡¨æ¿</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .status-healthy { color: green; }
        .status-warning { color: orange; }
        .status-error { color: red; }
        .card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .metric { display: inline-block; margin: 10px; padding: 10px; background: #f5f5f5; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>ğŸ”§ CoserEden é…ç½®ç›‘æ§ä»ªè¡¨æ¿</h1>
    
    <div class="card">
        <h2>ğŸ“Š é…ç½®å¥åº·çŠ¶æ€</h2>
        <div id="health-status">åŠ è½½ä¸­...</div>
    </div>
    
    <div class="card">
        <h2>ğŸ“ˆ é…ç½®æŒ‡æ ‡</h2>
        <div class="metric">
            <strong>æ€»é…ç½®é¡¹:</strong> <span id="total-configs">-</span>
        </div>
        <div class="metric">
            <strong>COSEREEDEN_å‰ç¼€:</strong> <span id="cosereeden-configs">-</span>
        </div>
        <div class="metric">
            <strong>é…ç½®å†²çª:</strong> <span id="config-conflicts">-</span>
        </div>
        <div class="metric">
            <strong>å‘½åè§„èŒƒé—®é¢˜:</strong> <span id="naming-issues">-</span>
        </div>
    </div>
    
    <div class="card">
        <h2>ğŸ” æœ€è¿‘æ£€æŸ¥</h2>
        <div id="recent-checks">æš‚æ— æ•°æ®</div>
    </div>
    
    <script>
        // åŠ è½½é…ç½®å¥åº·æŠ¥å‘Š
        async function loadHealthReport() {
            try {
                const response = await fetch('/logs/config-health-report.json');
                const report = await response.json();
                
                const statusElement = document.getElementById('health-status');
                const statusClass = report.status === 'HEALTHY' ? 'status-healthy' : 
                                  report.status === 'WARNING' ? 'status-warning' : 'status-error';
                
                statusElement.innerHTML = `<span class="${statusClass}">${report.status}</span>`;
                statusElement.innerHTML += `<br><small>æœ€åæ›´æ–°: ${new Date(report.timestamp).toLocaleString()}</small>`;
                
                // æ˜¾ç¤ºé—®é¢˜å’Œå»ºè®®
                if (report.issues.length > 0) {
                    statusElement.innerHTML += '<br><strong>é—®é¢˜:</strong><ul>';
                    report.issues.forEach(issue => {
                        statusElement.innerHTML += `<li>${issue}</li>`;
                    });
                    statusElement.innerHTML += '</ul>';
                }
                
                if (report.recommendations.length > 0) {
                    statusElement.innerHTML += '<br><strong>å»ºè®®:</strong><ul>';
                    report.recommendations.forEach(rec => {
                        statusElement.innerHTML += `<li>${rec}</li>`;
                    });
                    statusElement.innerHTML += '</ul>';
                }
                
            } catch (error) {
                document.getElementById('health-status').innerHTML = 
                    '<span class="status-error">æ— æ³•åŠ è½½å¥åº·æŠ¥å‘Š</span>';
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
        loadHealthReport();
        
        // æ¯30ç§’åˆ·æ–°ä¸€æ¬¡
        setInterval(loadHealthReport, 30000);
    </script>
</body>
</html>